From 0ca27a6df3f6e9745cc136595dfc3418a7ea3196 Mon Sep 17 00:00:00 2001
From: Joe MacDonald <joe_macdonald@mentor.com>
Date: Thu, 25 Sep 2014 16:07:17 -0400
Subject: [PATCH 2/3] bash: reset parser state on lookahead eol

Author: Chet Ramey <chet.ramey@case.edu>

Upstream-status: Backport [http://lists.gnu.org/archive/html/bug-bash/2014-09/msg00123.html]

Signed-off-by: Joe MacDonald <joe_macdonald@mentor.com>
---
 parse.y | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/parse.y b/parse.y
index 82595de..271caf1 100644
--- a/parse.y
+++ b/parse.y
@@ -2953,6 +2953,8 @@ reset_parser ()
   FREE (word_desc_to_read);
   word_desc_to_read = (WORD_DESC *)NULL;
 
+  eol_ungetc_lookahead = 0;
+
   current_token = '\n';		/* XXX */
   last_read_token = '\n';
   token_to_read = '\n';
-- 
1.9.1

